# Builds for the SpatGRIS manuals



## todo:
- Move this to GRIS github and add infrastructure to deploy github pages

## dependencies
### To edit
- cargo/rust
- mdbook (`cargo install mdbook`)

### To regenerate from the original docx files

in addition to the above dependencies, you need

- xonsh (`sudo apt install xonsh`)
- generate mdbook summary (`cargo install gen-mdbook-summary`)
- pipx
- mdsplit (`pipx install mdsplit`)
- inkscape (for emf image files) (`sudo apt install inkscape`)
- pandoc + a whole bunch of latex stuff (good luck, try installing stuff until it stops complaining)

## Editing the manuals

- Go into `sources/spatgris-man-en/src` and `sources/spatgris-man-fr/src`
- Edit the relevant chapters
- In the mdbook folder (`sources/spatgris-man-en` or `sources/spatgris-man-fr`) run `mdbook build`

## how to use the scripts
### convert docx to mdbooks

If you have a new docx version of the manual, you can do the whole conversion to `.md`, complete with image extraction and `.emf`, split of the md file into chapters and generation of mdbook folders by running `scripts/make-mdbook-from-docx.xonsh`.

This will create a .md file for the english and french version of the manual and create some mdbooks folders with all of the sources.

You will need to manually edit some stuff afterwards so I would recommend you to not touch this script anymore

### make pdfs and htmls

The `scripts/make-outputs.xonsh` can make primitive pdfs and html files from the md files generated by the make-mdbook-from-docx script. The mdbooks versions are much prettier so don't use it.
