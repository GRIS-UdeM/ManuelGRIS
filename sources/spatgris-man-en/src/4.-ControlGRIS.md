# 4. ControlGRIS

*ControlGRIS* is an OSC plugin that offers two possibilities, according
to the mode chosen in *SpatGRIS*:

• DOME.

• CUBE.

These two modes will be explained in detail in the *SpatGRIS* section.

## 4.1. Introduction

*ControlGRIS* is an OSC spatialization plugin. This plugin allows
movements of multichannel sound sources on a variable set of speakers.
Several sources link modes and a trajectory system are provided to allow
the spatialization of mono, stereo, quad, 5.1 or multichannel sources of
up to eight channels. *ControlGRIS* doesn't handle audio, only data
which is sent to *SpatGRIS*. The audio itself is sent from the DAW
directly to *SpatGRIS via BlackHole*.

This document describes the operating instructions and functions
specific to *ControlGRIS*. It is assumed that the user has a working
knowledge of the host software and can perform basic functions to
configure it.

## 4.2. Graphical interface

The graphical interface allows the placement of the sound sources. It is
slightly different in DOME than in CUBE mode. In DOME, since the
Distance is fixed at 1.00, there are only the Azimuth and Elevation
parameters to adjust. In CUBE, the three parameters, Azimuth-Distance
and Elevation are adjustable on two different windows.

<img src="/media-en/media/image17.png"
style="width:6.38128in;height:4.6in" />

## 4.3. Configuration panel

The configuration panel gives access to different plugin parameters.
These settings are grouped under three tabs: Sources, Settings and
Controllers.

<img src="/media-en/media/image18.jpg"
style="width:4.02869in;height:1.2in" />

### 4.3.1. Settings

#### MODE

The DOME mode is based on the VBAP algorithm designed by Ville Pulkki.
In this mode, the space is represented by a dome where the distance
between every point of the surface to the centre of the dome is equal to
1.00.

The CUBE mode is based on an original MBAP[^lbap-footnote] algorithm designed by Gaël
Lane Lépine. In this mode, the space is represented by a cube within
which it is possible to design any kind of speaker setup.

#### OSC Port

This is the OSC port number for communication between *ControlGRIS* and
*SpatGRIS*. They should be set to the same one. 18032 is the default
value.

#### IP Address

The default value here is 127.0.0.1 which corresponds to the address of
the internal device (i.e. your computer). This can be changed to send
the OSC to an external computer.

#### Number of Sources

The number of sources per track corresponds to the number of audio
channels in the track. The number is limited to eight channels (as it is
in most DAWs).

#### First Source ID

This number must be unique and different for each audio channel. You
must use the same numbers for audio and for OSC.

If you have only mono tracks, the numbers are successive. If you have
stereo tracks, you'll have only odd numbers to put here: 1, 3, 5, etc.
because the even numbers are set automatically to the right channel of
each stereo track. And if you work with octophonic sound files, the
first source ID will be 1, the second octophonic track will start at 9,
etc.

### 4.3.2. Sources

Under the Sources tab, it is possible to accurately position sources by
using the graphical interface or the text boxes. Using Sources
Placement, it is possible to position sources equidistantly, following a
clockwise or alternate order. To do so, simply select the desired layout
from the drop-down menu.

<img src="/media-en/media/image19.jpg"
style="width:1.72747in;height:1.25984in" />

Moreover, it is possible to manually adjust the position of each source
by entering its polar (DOME) or Cartesian (CUBE) coordinates. From the
Source Number drop-down menu, first select the number of the source to
be moved. Then, enter its new coordinates.

In DOME, Elevation and Azimuth correspond to the current polar
coordinates of the selected source:

<img src="/media-en/media/image20.jpg"
style="width:4.13386in;height:1.1811in" />

In CUBE, X, Y, and Z correspond to the current Cartesian coordinates of
the selected source:

<img src="/media-en/media/image21.jpg"
style="width:4.13386in;height:1.1811in" />

**NOTE: Manual positioning of individual sources only works when the
Independent mode is chosen under Sources Link.**

### 4.3.3. Controllers

<img src="/media-en/media/image22.png"
style="width:4.16in;height:1.28213in" />

*ControlGRIS* can be manipulated via an external Open Sound Control[^osc-footnote]
(OSC) controller. There is an interface made for Open Stage Control and
one made for Lemur to manipulate *ControlGRIS* parameters from an
iPad[^ipad-footnote].

• OSC output plugin ID: to control different instances of *ControlGRIS*,
each one should have a different ID.

• Receive and Send should be set accordingly to the proper OSC channels
(Default: 9000 and 8000).

• IP port addresses should be set accordingly to your Wi-Fi network,
either public or local[^openstagecontrol-footnote]. Both the computer and the controller should
be on the same network. *ControlGRIS* automatically receives the input
address from your network.

## 4.4. Spatialization views

*ControlGRIS* works in two different modes for sound spatialization:
DOME and CUBE.

### 4.4.1 View in DOME mode

In DOME mode, the graphical interface is limited to Azimuth-Elevation.
In this mode, the sound is spatialized on the surface of the dome.
Whereas a source placed in the centre is at the top of the dome, a
source placed at the periphery is at the bottom of the dome.

The dome is represented here from the top, examples with a stereo source
on the left, an octophonic source on the right:

<img src="/media-en/media/image23.jpg"
style="width:2.5in;height:1.51736in" /><img src="/media-en/media/image24.jpg"
style="width:2.5in;height:1.5211in" />

### 4.4.2. Spans in DOME mode

In both modes, Span parameters are available for azimuth and elevation.
Span spreads the signal to a larger zone than just the source itself. In
DOME mode, the spans look like an arc on each side of the source:

<img src="/media-en/media/image25.jpg"
style="width:2.5in;height:1.51969in" /><img src="/media-en/media/image26.jpg"
style="width:2.02551in;height:1.52in" />

### 4.4.3. View in CUBE mode

In CUBE mode, the graphical interface is divided between two screens:
Azimuth-Distance and Elevation. The CUBE mode adds distance and allows
moving a sound inside or outside the speaker setup (represented by the
internal white square). The CUBE is represented from the top on the left
and in profile on the right (the 3D view shows only in *SpatGRIS*).
Examples for stereo and octophonic sources:

<img src="/media-en/media/image27.jpg"
style="width:2.53063in;height:1.52in" />
<img src="/media-en/media/image28.jpg"
style="width:2.50435in;height:1.52in" />

### 4.4.4. Spans in CUBE mode

In CUBE mode, the spans look like a cylinder wrapped around the source:

<img src="/media-en/media/image29.jpg"
style="width:2.46662in;height:1.5in" /><img src="/media-en/media/image30.jpg"
style="width:1.75084in;height:1.5in" />

In some CUBE setups, where most speakers are spread across the walls and
the ceiling, a source can be lost in the centre of the hall. If you wish
to create a flat sound disk that activates only the speakers located at
the same height as the source, you can add a bit of Azimuth Span:

<img src="/media-en/media/image31.jpg"
style="width:6.15in;height:1.95144in" />

### 4.4.5. CUBE Elevation in Normal or Extended Top mode

Since version 1.4.1, *ControlGRIS* offers the possibility to put a
source outside of the CUBE in elevation. This was already possible on
the *x* and *y* axes, and it is now possible on the *z* axis. When using
the Extended Top mode, a white horizontal line appears in the elevation
diagram. This line represents the value 1.0 used in the Normal mode.
This is the point at with *SpatGRIS* Attenuation Settings start to take
effect in elevation. Sources will be filtered either in volume and/or in
frequencies as they move further away from the top of the cube:

<img src="/media-en/media/image32.jpg"
style="width:6.15in;height:1.91268in" />

### 4.4.6. CUBE Elevation in Extended Top and Bottom mode

A second line appears in Extended Top and Bottom mode to attenuate the
sounds that are sent below the floor (for the lucky few who have access
to a full cube!) The top line represents the value 1.0 of the normal
mode. The bottom line represents the value 0.0 of the Normal mode:

<img src="/media-en/media/image33.jpg"
style="width:6.15in;height:1.90611in" />

NOTE 1: Older projects can still be used in the Normal mode where the
full range from 0.00 to 1.00 is still available.

NOTE 2: It's not yet possible to go below the floor in a complete sphere
with ControlGRIS in DOME mode. We are working on that. But it's possible
to do so by using any software that sends OSC directly to SpatGRIS.

## 4.5. How to use ControlGRIS

*ControlGRIS* is a plugin that can be inserted on any track that
requires spatialization. *ControlGRIS* comprises a trajectory system
that can write predefined movements quickly and efficiently. The
automation function of the host software assures the recording and
playback of the source's movements. It is therefore essential to
understand the various automation modes in your preferred host.

### 4.5.1. Load the plugin on a track

*ControlGRIS* is loaded similarly to any other AU or VST plugin. Most
often, *ControlGRIS* is loaded at the end of the insert chain of the
track.

NOTE: In each track of the DAW, it’s mandatory that the audio output
numbers match the OSC numbers (set by the First Source ID parameter) in
the corresponding ControlGRIS to have the sound to be spatialized in
SpatGRIS. Not doing that will lead to silence, or to freeze
spatialization.

### 4.5.2. Save presets and recording automation

It is possible to save some of the *ControlGRIS* plugin parameters
within the 50 provided preset slots. The shortcuts are:

• Shift-Click Preset number: Save.

• Click Preset number: Load.

• Opt[^opt-alt-footnote]-Click Preset number: Delete.

These functions appear below the rows 49-50:

<img src="/media-en/media/image34.jpg"
style="width:0.68056in;height:0.65278in" />

These presets allow you to save and recall the following parameters
only:

• Source positions (Azimuth-Distance-Elevation). These can also be
automated.

The parameters that are not saved but can be automated:

• Spans.

• Sources Link and Sources Link Alt.

• Presets.

• Bypass.

The parameters that are not saved and not automated, because they are
used to automatically generate a trajectory that will be written by the
DAW itself:

• Spans link.

• Trajectory Type.

• Dur per cycle.

• Sec(s)/Beat(s).

• Number of cycles dampening.

• Deviation degrees per cycle.

• Back & Forth.

• Activate.

Configuration tab

• The whole Configuration tab is not saved in the preset (this one is
saved with the DAW project). It is not a good idea to change these
settings within a track.

NOTE: While it is possible to record the position of all sources in
presets, it is only possible to record the automation of the source No.
1 in the sequencer. Source No. 1 is the leader while other sources are
followers.

### 4.5.3. Recall presets

As mentioned above, the presets store only the position of the sources.
When a preset is loaded, the sources are positioned according to the
stored data. Keep in mind though that the sequencer also has a memory of
the previous position of the sources, and both can interact strangely.
Very often then, it's only when you start the sequencer that the sources
take their real positions. To avoid any ambiguity, presets selection can
be automated.

## 4.6. Trajectories

<img src="/media-en/media/image35.jpg"
style="width:4.13386in;height:1.1811in" />

It is possible to automate the movement of sound sources using
predefined trajectories. Within the Trajectories control panel, you can
set and adjust these movements to the musical context. The concept
behind the trajectories is that there is a source leader while the
others are followers. Only the source No. 1 can be the leader.

If you try to record the automation of any other source than No. 1,
you’ll get this warning:

<img src="/media-en/media/image36.jpg"
style="width:4.13386in;height:1.1059in" />

### 4.6.1. Sources Link

Independent mode is only available for initially placing sources
independently in a multichannel track. But the position of sources can't
be automated independently. Only the automation of the Source No. 1 can
be recorded. Therefore, after placing the sources, a different source
link should be chosen before recording the automation.

#### Azimuth-Elevation (DOME) and Azimuth-Distance (CUBE) Links

Within the *Trajectories* section, under the *Sources Link* drop-down
menu, it is possible to choose different ways of linking sources
together. Depending on the number of channels, some links may not be
available:

• Mono: Independent only.

• Stereo: all links.

• Multichannel: all but Symmetric X and Y.

• Detailed representations of the Azimuth-Elevation and Azimuth-Distance
Links are shown at the Addendum 8.1.1.

<img src="/media-en/media/image37.jpg"
style="width:4.13386in;height:1.1811in" />

#### Elevation Links (CUBE mode only)

In CUBE mode, the Elevation Links between sources are independent from
the Azimuth-Distance parameters.

• Detailed representations of the Elevation Links are shown at the
Addendum 8.1.2.

<img src="/media-en/media/image38.jpg"
style="width:4.13386in;height:1.1811in" />

### 4.6.2. Trajectory Type

Automating the movement of a source is quite simple with the different
trajectory types provided.

• Detailed representations of the Trajectories are shown at the Addendum
8.2.

#### Azimuth-Elevation (DOME) and Azimuth-Distance (CUBE) Trajectory Type

A drop-down menu allows you to select from different types of
trajectories such as *Circle*, *Ellipse*, *Spiral*, *Square* and
*Triangle,* either in *Clockwise* or *Counter Clockwise* mode.

<img src="/media-en/media/image39.jpg"
style="width:4.1378in;height:2.33326in" />

#### Elevation (CUBE only) Trajectory Type

A drop-down menu with different types of trajectories allows you to
select from a variety such as *Up Down*, *Down Up.*

<img src="/media-en/media/image40.jpg"
style="width:4.13in;height:1.24915in" />

#### Other settings

• The duration of the trajectory in *second(s)* or *beat(s)* (linked to
the MIDI tempo of the host sequencer).

• The Number of cycles dampening: the total duration = Dur per cycle x
Number of cycles x 1,5. Dampening works only with Back & Forth.

• The Back & Forth option.

• The Deviation degrees per cycle.

#### Realtime

This is the usual automation recording: you move a parameter (or several
parameters) and it is recorded in the DAW.

#### Drawing

The Drawing mode allows you to draw a trajectory directly into the
plugin itself. This trajectory can then be modified by editing the
duration, dampening and deviation. When the desired settings are found,
they can be recorded in the DAW itself.

<img src="/media-en/media/image41.png"
style="width:5.28684in;height:3.5in" />

The Drawing mode is a freehand mode. When you select it, a light grey
cross will appear with which you draw a trajectory. The timing of the
trajectory and the design are temporarily stored within the plugin. In
Azimuth-Elevation (DOME) or Azimuth-Distance (CUBE), it's the position
that is recorded. In Elevation (CUBE only) it's the position over time.
Both windows share a cycle that can be modified with the regular
parameters. To see the trajectory in action, you can turn on the
Activate buttons and play the sequence. When the sequencer stops, the
Activate buttons return to off. Changes can be made and then it's
possible to switch on Activate again. Once satisfied with the results,
you can then record the trajectory in the DAW.

#### Shift-Click in Drawing mode

If Shift is pressed in the Drawing mode, it's possible to design
straight lines or irregular geometrical figures in the Azimuth-Elevation
(DOME) or the Azimuth-Distance (CUBE) window. Every time you click, a
new angle is created. Don't forget to click one last time once you’re
finished!

<img src="/media-en/media/image42.jpg"
style="width:1.31862in;height:1.40157in" /><img src="/media-en/media/image43.jpg"
style="width:1.31304in;height:1.4in" />

**NOTE: Be careful with the freehand trajectory because it’s temporary.
If you click anywhere in the window after drawing a trajectory, or close
the plugin or the session, it will automatically be erased. Only one
gesture can be temporarily recorded at a time. The X cross can be hidden
behind one of the sources. Just move one of those to find it back.**

#### Activate

<img src="/media-en/media/image44.jpg"
style="width:4.12043in;height:1.1811in" />

Pressing the Activate button makes *ControlGRIS* wait for the start of
the sequencer. When the sequence is initiated, the plugin will start the
trajectory according to the specified settings. The movement produced
can be recorded — X, Y and Z-coordinates of the source No. 1 — like any
other automation. When the sequencer stops, the *Activate* buttons
return to off. It's important to put the play head at the right position
before pressing on the activate button and putting the sequence into
play.

#### Trajectory recording in the DAW

As explained above, *ControlGRIS* waits for the host sequencer to start
before starting a trajectory. The tracks that contain *ControlGRIS* can
be set in a write mode (Touch, Latch, or Write — depending on the
options within your DAW) to record the sources' movements as automation.
This automation is then available for playback and editing.

NOTE: Only the source No. 1 (leader) is recorded, the other sources
being followers. It is always preferable to record the automation of
trajectories in the DAW after you have found the right settings, because
it frees up the CPU used by ControlGRIS.

### 4.6.3. A special case: the pendulum

A specific use of the Shift-Click in Drawing mode can be used to design
a pendulum. If a simple line is drawn with Shift-Click, it constitutes
the basic element of a pendulum. Then the Dur per cycle, Dampening,
Deviation and Back & Forth can be used to make this pendulum very
interesting. It can be placed anywhere in the space.

<img src="/media-en/media/image45.jpg"
style="width:1.29042in;height:2.3622in" />

### 4.6.4. Presets and automated trajectories

It's possible to record the presets selection in the sequencer. But to
avoid contradictory information between automated trajectories and
automated presets (which stores x-y position of the sources), in
automation recording, the x and y coordinates, registered in the preset,
will be automatically written in the x-y automation curves. The
automated presets are designed essentially to offer the possibility to
apply sudden changes in the position of the sources.

<img src="/media-en/media/image46.png"
style="width:5.56203in;height:3.46457in" />

NOTE: Be careful with that. If you overwrite the already existing X and
Y automations, they might become in competition with the information
stored in the presets. Then you will certainly get audio glitches.

[^lbap-footnote]: Since version 3.2.0, the LBAP, Layer Base Amplitude Panning, designed by Olivier Bélanger, is not in use anymore.
[^osc-footnote]: http://opensoundcontrol.org
[^ipad-footnote]: See the Addendum manual for more information.
[^openstagecontrol-footnote]: See the Open Stage Control manual for that: <https://openstagecontrol.ammd.net/>
[^opt-alt-footnote]: On the Mac, most keyboards use Option (Opt), while others use Alt. Opt will be used in this manual.
